// Code generated by gotdgen, DO NOT EDIT.

package tdapi

import (
	"context"
	"errors"
	"fmt"
	"sort"
	"strings"

	"go.uber.org/multierr"

	"github.com/gotd/td/bin"
	"github.com/gotd/td/tdp"
	"github.com/gotd/td/tgerr"
)

// No-op definition for keeping imports.
var (
	_ = bin.Buffer{}
	_ = context.Background()
	_ = fmt.Stringer(nil)
	_ = strings.Builder{}
	_ = errors.Is
	_ = multierr.AppendInto
	_ = sort.Ints
	_ = tdp.Format
	_ = tgerr.Error{}
)

// GroupCall represents TL type `groupCall#e8fe8ddc`.
type GroupCall struct {
	// Group call identifier
	ID int32
	// Group call title
	Title string
	// Point in time (Unix timestamp) when the group call is supposed to be started by an
	// administrator; 0 if it is already active or was ended
	ScheduledStartDate int32
	// True, if the group call is scheduled and the current user will receive a notification
	// when the group call will start
	EnabledStartNotification bool
	// True, if the call is active
	IsActive bool
	// True, if the call is joined
	IsJoined bool
	// True, if user was kicked from the call because of network loss and the call needs to
	// be rejoined
	NeedRejoin bool
	// True, if the current user can manage the group call
	CanBeManaged bool
	// Number of participants in the group call
	ParticipantCount int32
	// True, if all group call participants are loaded
	LoadedAllParticipants bool
	// Recently speaking users in the group call
	RecentSpeakers []GroupCallRecentSpeaker
	// True, if the current user's video is enabled
	IsMyVideoEnabled bool
	// True, if the current user's video is paused
	IsMyVideoPaused bool
	// True, if the current user can broadcast video or share screen
	CanEnableVideo bool
	// True, if only group call administrators can unmute new participants
	MuteNewParticipants bool
	// True, if the current user can enable or disable mute_new_participants setting
	CanChangeMuteNewParticipants bool
	// Duration of the ongoing group call recording, in seconds; 0 if none. An
	// updateGroupCall update is not triggered when value of this field changes, but the same
	// recording goes on
	RecordDuration int32
	// Call duration, in seconds; for ended calls only
	Duration int32
}

// GroupCallTypeID is TL type id of GroupCall.
const GroupCallTypeID = 0xe8fe8ddc

// Ensuring interfaces in compile-time for GroupCall.
var (
	_ bin.Encoder     = &GroupCall{}
	_ bin.Decoder     = &GroupCall{}
	_ bin.BareEncoder = &GroupCall{}
	_ bin.BareDecoder = &GroupCall{}
)

func (g *GroupCall) Zero() bool {
	if g == nil {
		return true
	}
	if !(g.ID == 0) {
		return false
	}
	if !(g.Title == "") {
		return false
	}
	if !(g.ScheduledStartDate == 0) {
		return false
	}
	if !(g.EnabledStartNotification == false) {
		return false
	}
	if !(g.IsActive == false) {
		return false
	}
	if !(g.IsJoined == false) {
		return false
	}
	if !(g.NeedRejoin == false) {
		return false
	}
	if !(g.CanBeManaged == false) {
		return false
	}
	if !(g.ParticipantCount == 0) {
		return false
	}
	if !(g.LoadedAllParticipants == false) {
		return false
	}
	if !(g.RecentSpeakers == nil) {
		return false
	}
	if !(g.IsMyVideoEnabled == false) {
		return false
	}
	if !(g.IsMyVideoPaused == false) {
		return false
	}
	if !(g.CanEnableVideo == false) {
		return false
	}
	if !(g.MuteNewParticipants == false) {
		return false
	}
	if !(g.CanChangeMuteNewParticipants == false) {
		return false
	}
	if !(g.RecordDuration == 0) {
		return false
	}
	if !(g.Duration == 0) {
		return false
	}

	return true
}

// String implements fmt.Stringer.
func (g *GroupCall) String() string {
	if g == nil {
		return "GroupCall(nil)"
	}
	type Alias GroupCall
	return fmt.Sprintf("GroupCall%+v", Alias(*g))
}

// TypeID returns type id in TL schema.
//
// See https://core.telegram.org/mtproto/TL-tl#remarks.
func (*GroupCall) TypeID() uint32 {
	return GroupCallTypeID
}

// TypeName returns name of type in TL schema.
func (*GroupCall) TypeName() string {
	return "groupCall"
}

// TypeInfo returns info about TL type.
func (g *GroupCall) TypeInfo() tdp.Type {
	typ := tdp.Type{
		Name: "groupCall",
		ID:   GroupCallTypeID,
	}
	if g == nil {
		typ.Null = true
		return typ
	}
	typ.Fields = []tdp.Field{
		{
			Name:       "ID",
			SchemaName: "id",
		},
		{
			Name:       "Title",
			SchemaName: "title",
		},
		{
			Name:       "ScheduledStartDate",
			SchemaName: "scheduled_start_date",
		},
		{
			Name:       "EnabledStartNotification",
			SchemaName: "enabled_start_notification",
		},
		{
			Name:       "IsActive",
			SchemaName: "is_active",
		},
		{
			Name:       "IsJoined",
			SchemaName: "is_joined",
		},
		{
			Name:       "NeedRejoin",
			SchemaName: "need_rejoin",
		},
		{
			Name:       "CanBeManaged",
			SchemaName: "can_be_managed",
		},
		{
			Name:       "ParticipantCount",
			SchemaName: "participant_count",
		},
		{
			Name:       "LoadedAllParticipants",
			SchemaName: "loaded_all_participants",
		},
		{
			Name:       "RecentSpeakers",
			SchemaName: "recent_speakers",
		},
		{
			Name:       "IsMyVideoEnabled",
			SchemaName: "is_my_video_enabled",
		},
		{
			Name:       "IsMyVideoPaused",
			SchemaName: "is_my_video_paused",
		},
		{
			Name:       "CanEnableVideo",
			SchemaName: "can_enable_video",
		},
		{
			Name:       "MuteNewParticipants",
			SchemaName: "mute_new_participants",
		},
		{
			Name:       "CanChangeMuteNewParticipants",
			SchemaName: "can_change_mute_new_participants",
		},
		{
			Name:       "RecordDuration",
			SchemaName: "record_duration",
		},
		{
			Name:       "Duration",
			SchemaName: "duration",
		},
	}
	return typ
}

// Encode implements bin.Encoder.
func (g *GroupCall) Encode(b *bin.Buffer) error {
	if g == nil {
		return fmt.Errorf("can't encode groupCall#e8fe8ddc as nil")
	}
	b.PutID(GroupCallTypeID)
	return g.EncodeBare(b)
}

// EncodeBare implements bin.BareEncoder.
func (g *GroupCall) EncodeBare(b *bin.Buffer) error {
	if g == nil {
		return fmt.Errorf("can't encode groupCall#e8fe8ddc as nil")
	}
	b.PutInt32(g.ID)
	b.PutString(g.Title)
	b.PutInt32(g.ScheduledStartDate)
	b.PutBool(g.EnabledStartNotification)
	b.PutBool(g.IsActive)
	b.PutBool(g.IsJoined)
	b.PutBool(g.NeedRejoin)
	b.PutBool(g.CanBeManaged)
	b.PutInt32(g.ParticipantCount)
	b.PutBool(g.LoadedAllParticipants)
	b.PutInt(len(g.RecentSpeakers))
	for idx, v := range g.RecentSpeakers {
		if err := v.EncodeBare(b); err != nil {
			return fmt.Errorf("unable to encode bare groupCall#e8fe8ddc: field recent_speakers element with index %d: %w", idx, err)
		}
	}
	b.PutBool(g.IsMyVideoEnabled)
	b.PutBool(g.IsMyVideoPaused)
	b.PutBool(g.CanEnableVideo)
	b.PutBool(g.MuteNewParticipants)
	b.PutBool(g.CanChangeMuteNewParticipants)
	b.PutInt32(g.RecordDuration)
	b.PutInt32(g.Duration)
	return nil
}

// Decode implements bin.Decoder.
func (g *GroupCall) Decode(b *bin.Buffer) error {
	if g == nil {
		return fmt.Errorf("can't decode groupCall#e8fe8ddc to nil")
	}
	if err := b.ConsumeID(GroupCallTypeID); err != nil {
		return fmt.Errorf("unable to decode groupCall#e8fe8ddc: %w", err)
	}
	return g.DecodeBare(b)
}

// DecodeBare implements bin.BareDecoder.
func (g *GroupCall) DecodeBare(b *bin.Buffer) error {
	if g == nil {
		return fmt.Errorf("can't decode groupCall#e8fe8ddc to nil")
	}
	{
		value, err := b.Int32()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field id: %w", err)
		}
		g.ID = value
	}
	{
		value, err := b.String()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field title: %w", err)
		}
		g.Title = value
	}
	{
		value, err := b.Int32()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field scheduled_start_date: %w", err)
		}
		g.ScheduledStartDate = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field enabled_start_notification: %w", err)
		}
		g.EnabledStartNotification = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field is_active: %w", err)
		}
		g.IsActive = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field is_joined: %w", err)
		}
		g.IsJoined = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field need_rejoin: %w", err)
		}
		g.NeedRejoin = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field can_be_managed: %w", err)
		}
		g.CanBeManaged = value
	}
	{
		value, err := b.Int32()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field participant_count: %w", err)
		}
		g.ParticipantCount = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field loaded_all_participants: %w", err)
		}
		g.LoadedAllParticipants = value
	}
	{
		headerLen, err := b.Int()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field recent_speakers: %w", err)
		}

		if headerLen > 0 {
			g.RecentSpeakers = make([]GroupCallRecentSpeaker, 0, headerLen%bin.PreallocateLimit)
		}
		for idx := 0; idx < headerLen; idx++ {
			var value GroupCallRecentSpeaker
			if err := value.DecodeBare(b); err != nil {
				return fmt.Errorf("unable to decode bare groupCall#e8fe8ddc: field recent_speakers: %w", err)
			}
			g.RecentSpeakers = append(g.RecentSpeakers, value)
		}
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field is_my_video_enabled: %w", err)
		}
		g.IsMyVideoEnabled = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field is_my_video_paused: %w", err)
		}
		g.IsMyVideoPaused = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field can_enable_video: %w", err)
		}
		g.CanEnableVideo = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field mute_new_participants: %w", err)
		}
		g.MuteNewParticipants = value
	}
	{
		value, err := b.Bool()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field can_change_mute_new_participants: %w", err)
		}
		g.CanChangeMuteNewParticipants = value
	}
	{
		value, err := b.Int32()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field record_duration: %w", err)
		}
		g.RecordDuration = value
	}
	{
		value, err := b.Int32()
		if err != nil {
			return fmt.Errorf("unable to decode groupCall#e8fe8ddc: field duration: %w", err)
		}
		g.Duration = value
	}
	return nil
}

// GetID returns value of ID field.
func (g *GroupCall) GetID() (value int32) {
	return g.ID
}

// GetTitle returns value of Title field.
func (g *GroupCall) GetTitle() (value string) {
	return g.Title
}

// GetScheduledStartDate returns value of ScheduledStartDate field.
func (g *GroupCall) GetScheduledStartDate() (value int32) {
	return g.ScheduledStartDate
}

// GetEnabledStartNotification returns value of EnabledStartNotification field.
func (g *GroupCall) GetEnabledStartNotification() (value bool) {
	return g.EnabledStartNotification
}

// GetIsActive returns value of IsActive field.
func (g *GroupCall) GetIsActive() (value bool) {
	return g.IsActive
}

// GetIsJoined returns value of IsJoined field.
func (g *GroupCall) GetIsJoined() (value bool) {
	return g.IsJoined
}

// GetNeedRejoin returns value of NeedRejoin field.
func (g *GroupCall) GetNeedRejoin() (value bool) {
	return g.NeedRejoin
}

// GetCanBeManaged returns value of CanBeManaged field.
func (g *GroupCall) GetCanBeManaged() (value bool) {
	return g.CanBeManaged
}

// GetParticipantCount returns value of ParticipantCount field.
func (g *GroupCall) GetParticipantCount() (value int32) {
	return g.ParticipantCount
}

// GetLoadedAllParticipants returns value of LoadedAllParticipants field.
func (g *GroupCall) GetLoadedAllParticipants() (value bool) {
	return g.LoadedAllParticipants
}

// GetRecentSpeakers returns value of RecentSpeakers field.
func (g *GroupCall) GetRecentSpeakers() (value []GroupCallRecentSpeaker) {
	return g.RecentSpeakers
}

// GetIsMyVideoEnabled returns value of IsMyVideoEnabled field.
func (g *GroupCall) GetIsMyVideoEnabled() (value bool) {
	return g.IsMyVideoEnabled
}

// GetIsMyVideoPaused returns value of IsMyVideoPaused field.
func (g *GroupCall) GetIsMyVideoPaused() (value bool) {
	return g.IsMyVideoPaused
}

// GetCanEnableVideo returns value of CanEnableVideo field.
func (g *GroupCall) GetCanEnableVideo() (value bool) {
	return g.CanEnableVideo
}

// GetMuteNewParticipants returns value of MuteNewParticipants field.
func (g *GroupCall) GetMuteNewParticipants() (value bool) {
	return g.MuteNewParticipants
}

// GetCanChangeMuteNewParticipants returns value of CanChangeMuteNewParticipants field.
func (g *GroupCall) GetCanChangeMuteNewParticipants() (value bool) {
	return g.CanChangeMuteNewParticipants
}

// GetRecordDuration returns value of RecordDuration field.
func (g *GroupCall) GetRecordDuration() (value int32) {
	return g.RecordDuration
}

// GetDuration returns value of Duration field.
func (g *GroupCall) GetDuration() (value int32) {
	return g.Duration
}
